!function(){const e="michael",n="boy",t="speechSynthesis"in window&&"SpeechSynthesisUtterance"in window;function i(e){if(!t)return null;const n=new window.SpeechSynthesisUtterance(e);return n.pitch=.8,n.rate=1.25,n}function o(e){return new Promise(((n,t)=>{if(!e)return t();let i=!1;e.onstart=function(){i=!0},e.onend=function(){n()},e.onerror=function(){t()},window.speechSynthesis.speak(e),setTimeout((function(){i||t()}),3e3)}))}function a(e,n){const t=new URLSearchParams(window.location.search);t.set(e,n),history.replaceState(null,null,"?"+t.toString())}function c(e){window.document.title=e+", it's your birthday today"}function r(e,n){var t=null;return function(){var i=this,o=arguments;clearTimeout(t),t=setTimeout((function(){e.apply(i,o)}),n)}}function s(e,n){return window.BLOCKED_TEXT.some((n=>e.toLowerCase().includes(n)))?n:e}const d=decodeURIComponent(window.location.hash.slice(1)),u=new URLSearchParams(window.location.search),y=u.has("name")?decodeURIComponent(u.get("name")):null,l=u.has("identity")?decodeURIComponent(u.get("identity")):null,m=document.querySelector("#input-name"),h=document.querySelector("#input-identity"),p=document.querySelector("button"),f=document.querySelector("details");f.addEventListener("click",(e=>{e.target===f&&f.removeAttribute("open")}));const w=s(y||d||e,e),S=s(l||n,n),v={name:w,nameSpeechSynthesis:i(w),identity:S,identitySpeechSynthesis:i(S),firstTry:!0};function L(){m.value!==v.name&&(v.name=s(m.value,e),""===v.name&&(v.name=e),v.nameSpeechSynthesis=i(v.name),a("name",encodeURIComponent(v.name)),c(v.name))}function b(){h.value!==v.identity&&(v.identity=s(h.value,n),""===v.identity&&(v.identity=n),v.identitySpeechSynthesis=i(v.identity),a("identity",encodeURIComponent(v.identity)))}m.value=v.name,h.value=v.identity,v.name&&v.name!==e&&c(v.name),L(),b(),m.addEventListener("change",L),m.addEventListener("keyup",r(L,200)),h.addEventListener("change",b),h.addEventListener("keyup",r(b,200));const k={intro:[0,7600],name:[7600,550],cakeAndIcecream:[8150,3600],suchAGoodBoy:[12200,550],boy:[12750,250],thisYearWowWeGonnaCheer:[13e3,2650]},C=new window.Howl({src:["rats.mp3"],sprite:k}),T={};function E(){v.firstTry?C.play(T.cakeAndIcecream):C.play(T.suchAGoodBoy),v.firstTry=!v.firstTry}function U(){C.play(T.thisYearWowWeGonnaCheer)}function I(){if(v.name===e)return C.play(T.name);o(v.nameSpeechSynthesis).catch((()=>{C.play(T.name)})).finally((()=>{E()}))}function g(){if(v.identity===n)return C.play(T.boy);o(v.identitySpeechSynthesis).catch((()=>{C.play(T.boy)})).finally((()=>{U()}))}p.addEventListener("click",(function(){C.mute(!0),Object.keys(k).forEach((e=>{T[e]=C.play(e),C.pause(T[e])})),C.mute(!1),C.play(T.intro),p.innerHTML="Loading...",p.disabled=!0,C.on("play",(function(){p.style.display="none"}),T.intro),C.on("end",I,T.intro),C.on("end",E,T.name),C.on("end",I,T.cakeAndIcecream),C.on("end",g,T.suchAGoodBoy),C.on("end",U,T.boy),C.on("end",(function(){C.seek(.3,T.intro),C.play(T.intro)}),T.thisYearWowWeGonnaCheer)}))}();